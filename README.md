
# 🏆 现代 C++ 猜数字游戏 (Guessing Game v2.0)

这是一个基于 C++ 开发的高级文本猜数字游戏。项目从一个简单的控制台程序演进而来，目前已具备**现代内存管理**、**持久化存储**以及**动态视觉反馈**等功能。

## ✨ 核心特性

* **智能内存管理**：全面采用 `std::shared_ptr` 管理 `Leaderboard` 对象，确保对象的生命周期安全且解耦。
* **持久化排行榜**：自动将玩家记录保存至 `ranking.txt`，支持跨会话读取历史数据。
* **重名智能处理**：系统会自动识别老玩家并更新其个人最高记录，而非简单堆砌重复条目。
* **动态提示系统**：实时根据玩家猜测与目标的距离，提供“烫、热、暖、冷、极冷”的感官反馈。
* **视觉增强**：集成 ANSI 颜色代号，在终端实现彩色排版和精美表格输出。

## 🏗️ 架构设计

项目采用面向对象设计 (OOP)，主要分为以下两个模块：

1. **`GameManager` (引擎层)**：
* 负责游戏循环逻辑、随机数生成及用户输入处理。
* 通过智能指针与排行榜通信。


2. **`Leaderboard` (数据层)**：
* 维护 `GameRecord` 结构体列表。
* 实现**惰性排序**：仅在需要展示或保存时才执行 `std::sort`。
* **自愈机制**：自动处理文件不存在或损坏的情况。



## 🚀 快速开始

### 编译需求

* 支持 C++11 或更高版本的编译器 (推荐 GCC/Clang)。
* 支持 ANSI 转义序列的终端。

### 编译命令

```bash
g++ -std=c++11 main.cpp GameManager.cpp Leaderboard.cpp -o guessing_game

```

### 运行

```bash
./guessing_game

```

## 📝 开发笔记 (Memory Management)

在开发过程中，我们将 `GameManager` 对 `Leaderboard` 的访问从**引用**升级为了 **`std::shared_ptr`**。

* **原因**：避免了在复杂逻辑中可能出现的悬空引用问题。
* **亮点**：通过在 `ensureSorted()` 末尾调用 `saveToFile()`，实现了逻辑上的“整理即存盘”，并解决了潜在的递归调用导致段错误 (Segmentation Fault) 的风险。
